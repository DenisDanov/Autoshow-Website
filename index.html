<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cars World</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/flickity/2.2.2/flickity.pkgd.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flickity/2.2.2/flickity.min.css">
    <link rel="preload" href="banner-animation.js" as="script">
</head>

<body>
    <header class="nav-header" id="header">
        <a href="#" class="logo">
            <img class="logo-img" src="images/logo.png" alt="Logo">
        </a>
        <div class="h1">
            <h1>Where Luxury Meets Performance</h1>
        </div>
        <div class="container">
            <button class="hamburger" id="hamburgerButton">
                <i class="fas fa-bars"></i>
                <span class="menuText">Menu</span>
            </button>
            <ul class="menu" id="menu">
                <li><a class="menuItem" href="#" onclick="setHamburgerRelative(event)"><i class="fas fa-home"></i>
                        Home</a></li>
                <li><a class="menuItem" href="#" onclick="setHamburgerRelative(event)"><i class="fas fa-car"></i>
                        Auto
                        Show</a></li>
                <li><a class="menuItem" href="#" onclick="setHamburgerRelative(event)"><i
                            class="fas fa-sign-in-alt"></i> Log in</a></li>
                <li><a class="menuItem" href="#" onclick="setHamburgerRelative(event)"><i
                            class="fas fa-info-circle"></i> About</a></li>
            </ul>
        </div>
        <nav class="navs">
            <nav>
                <ul>
                    <li><a href="#"><i class="fas fa-home"></i></a></li>
                    <li><a href="#"><i class="fas fa-car"></i></a></li>
                    <li><a href="#"><i class="fas fa-sign-in-alt"></i></a></li>
                    <li><a href="#"><i class="fas fa-info-circle"></i></a></li>
                </ul>
            </nav>
            <nav>
                <ul>
                    <li><a href="#">Home</a></li>
                    <li class="auto-show"><a href="#">Auto Show</a></li>
                    <li><a href="#">Log in</a></li>
                    <li><a href="#">About</a></li>
                </ul>
            </nav>
        </nav>
    </header>
    <script defer src="mobile-menu.js"></script>
    <div class="site-banner">
        <div class="site-banner-inner">
            <div class="banner-img">
                <img src="images/porshe.webp" alt="">
            </div>
            <div class="banner-img">
                <img src="images/gtr-35.webp" alt="">
            </div>
            <div class="banner-img R8">
                <img src="images/R8.webp" alt="">
            </div>
            <div class="banner-img">
                <img src="images/lamborghini-huracan.webp" alt="">
            </div>
            <div class="banner-img">
                <img src="images/BMW-M8.webp" alt="">
            </div>
            <div class="banner-img">
                <img src="images/mercedes-gt.webp" alt="">
            </div>
            <div class="banner-img">
                <img src="images/photo-1577714141096-bf2b9e69500a.webp" alt="">
            </div>
        </div>
    </div>
    <script>
        const siteBannerInner = document.querySelector('.site-banner-inner');
        let shiftAmount = 0;
        let slideSpeed = calculateSlideSpeed();
        let originalBannerImages = Array.from(siteBannerInner.querySelectorAll('.banner-img'));
        let animationInitialized = false;

        function calculateSlideSpeed() {
            const screenWidth = window.innerWidth;
            if (screenWidth < 600) {
                return 250;
            } else if (screenWidth >= 600 && screenWidth < 1200) {
                return 700;
            } else if (screenWidth <= 1400) {
                return 1000;
            } else {
                return 1280;
            }
        }

        let initialShift = 0;

        function cloneAndAppendImages() {
            const currentImages = siteBannerInner.querySelectorAll('.banner-img');
            const totalImages = originalBannerImages.length * 100;

            if (currentImages.length < totalImages && window.innerWidth > 600) {
                originalBannerImages.forEach((image) => {
                    const clone = image.cloneNode(true);
                    siteBannerInner.appendChild(clone);
                });
            }
        }

        // Debounce function
        function debounce(func, wait) {
            let timeout;
            return function () {
                const context = this;
                const args = arguments;
                clearTimeout(timeout);
                timeout = setTimeout(() => {
                    func.apply(context, args);
                }, wait);
            };
        }

        // Debounce for the cloneAndAppendImages function
        const debouncedClone = debounce(cloneAndAppendImages, 100)

        function preloadImages() {
            originalBannerImages.forEach((image) => {
                const img = new Image();
                img.src = image.src;
            });
        }

        window.addEventListener('resize', () => {
            slideSpeed = calculateSlideSpeed();
            initialShift = shiftAmount % window.innerWidth; // Recalculate initialShift
        });

        window.addEventListener('load', () => {
            initialShift = shiftAmount % window.innerWidth; // Set initialShift on load
        });


        let previousTimestamp = performance.now();

        function shiftBanner() {
            const currentTimestamp = performance.now();
            const elapsed = currentTimestamp - previousTimestamp;
            previousTimestamp = currentTimestamp;

            const distanceToMove = slideSpeed / 1000;
            shiftAmount -= distanceToMove;

            siteBannerInner.style.transform = `translateX(${shiftAmount + initialShift}px)`;

            cloneAndAppendImages();

            if (!animationInitialized) {
                requestAnimationFrame(shiftBanner);
                animationInitialized = true;
            } else {
                requestAnimationFrame(shiftBanner);
            }
        }

        // Check if the sessionStorage exists
        const storedSessionShiftAmount = sessionStorage.getItem('sessionShiftAmount');
        if (storedSessionShiftAmount) {
            shiftAmount = parseFloat(storedSessionShiftAmount);
            siteBannerInner.style.transform = `translateX(${shiftAmount + initialShift}px)`;
        }

        // Reset shiftAmount when the browser is restarted
        window.addEventListener('beforeunload', () => {
            sessionStorage.setItem('sessionShiftAmount', '0');
        });

        preloadImages();

        setTimeout(() => {
            requestAnimationFrame(shiftBanner);
        }, 10); // Adjust the delay as needed

    </script>
    <div class="info-section">
        <h1>Danov's Auto Show</h1>
        <div class="paragraphs">
            <p><i class="fas fa-check-circle"></i> Discover the ultimate fusion of luxury and performance at Danov's
                auto show.</p>
            <p><i class="fas fa-check-circle"></i> Experience the thrill of witnessing the finest luxury vehicles on
                display.</p>
            <p><i class="fas fa-check-circle"></i> Immerse yourself in the world of top-tier sports automobiles and
                supercars.</p>
            <p><i class="fas fa-check-circle"></i> Explore an exquisite showcase of the most sought-after automotive
                craftsmanship.</p>
            <p><i class="fas fa-check-circle"></i> Indulge in the elegance and power of the best luxury and sports
                cars
                in the industry.</p>

            <a href="#" class="cta-button">Check Now</a>
        </div>
    </div>
    <div class="cars-container">
        <h1>Small Preview of the Auto Show</h1>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const images = [
                'images/g65.webp', 'images/g65-pic2.webp', 'images/g65-pic3.webp', 'images/g65-pic4.webp', 'images/g65-pic1.webp', 'images/g65-pic5.webp',
                'images/x6-4.webp', 'images/X6.webp', 'images/x6-1.webp', 'images/x6-3.webp', 'images/x6-5.webp', 'images/x6-2.webp',
                'images/Screenshot (1514).webp', 'images/urus.webp', 'images/Screenshot (1509).webp', 'images/Screenshot (1510).webp', 'images/Screenshot (1512).webp', 'images/Screenshot (1511).webp'
            ];

            function preloadImages(imageArray) {
                for (let i = 0; i < imageArray.length; i++) {
                    const img = new Image();
                    img.src = imageArray[i];
                }
            }

            preloadImages(images);
        });
    </script>
    <div class="cars-container" id="last">
        <div class="car-card">
            <div class="img-container" data-flickity='{ "lazyLoad": true }'>
                <img data-flickity-lazyload="images/g65.webp" alt="">
                <img src="images/g65-pic2.webp" alt="">
                <img src="images/g65-pic3.webp" alt="">
                <img src="images/g65-pic4.webp" alt="">
                <img src="images/g65-pic1.webp" alt="">
                <img src="images/g65-pic5.webp" alt="">
            </div>
            <div class="car-info">
                <h2>2023 MERCEDES-AMG G63 BRABUS 800</h2>
                <p><i class="fas fa-tools"></i> Engine: 4.0-litre twin-turbo V8</p>
                <p><i class="fas fa-cog"></i> Transmission: 9-Speed Automatic</p>
                <p><i class="fas fa-bolt"></i> Power: 588 kW / 800 hp</p>
                <p><i class="fas fa-cogs"></i> Torque: 1000 Nm</p>
                <p><i class="fas fa-tachometer-alt"></i> 0-100 km/h(80 mph): 4.1 s</p>
                <p><i class="fas fa-gas-pump"></i> Fuel Economy Combined: 13.1 l/100km</p>
                <p><i class="fas fa-tachometer-alt"></i> Max speed (Limited): 240 km/h (150 mph)</p>
            </div>
        </div>
        <div class="car-card">
            <div class="img-container" data-flickity='{ "lazyLoad": true }'>
                <img data-flickity-lazyload="images/x6-4.webp" alt="">
                <img src="images/X6.webp" alt="">
                <img src="images/x6-1.webp" alt="">
                <img src="images/x6-3.webp" alt="">
                <img src="images/x6-5.webp" alt="">
                <img src="images/x6-2.webp" alt="">
            </div>
            <div class="car-info">
                <h2>2022 BMW X6 M MANHART EDITION</h2>
                <p><i class="fas fa-tools"></i> Engine: 4.4-litre biturbo V8</p>
                <p><i class="fas fa-cog"></i> Transmission: 8-Speed Automatic</p>
                <p><i class="fas fa-bolt"></i> Power: 536 kW / 730 hp</p>
                <p><i class="fas fa-cogs"></i> Torque: 900 Nm</p>
                <p><i class="fas fa-tachometer-alt"></i> 0-100 km/h(80 mph): 3.8 s</p>
                <p><i class="fas fa-gas-pump"></i> Fuel Economy Combined: 12.1 l/100km</p>
                <p><i class="fas fa-tachometer-alt"></i> Max speed: 290 km/h (180 mph)</p>
            </div>
        </div>
        <div class="car-card">
            <div class="img-container" data-flickity='{ "lazyLoad": true }'>
                <img data-flickity-lazyload="images/Screenshot (1514).webp" alt="">
                <img src="images/urus.webp" alt="">
                <img src="images/Screenshot (1509).webp" alt="">
                <img src="images/Screenshot (1510).webp" alt="">
                <img src="images/Screenshot (1512).webp" alt="">
                <img src="images/Screenshot (1511).webp" alt="">
            </div>
            <div class="car-info">
                <h2>2022 LAMBORGHINI URUS MANSORY</h2>
                <p><i class="fas fa-tools"></i> Engine: 4.0-litre twin-turbo V8</p>
                <p><i class="fas fa-cog"></i> Transmission: 8-Speed Automatic</p>
                <p><i class="fas fa-bolt"></i> Power: 625 kW / 850 hp</p>
                <p><i class="fas fa-cogs"></i> Torque: 1000 Nm</p>
                <p><i class="fas fa-tachometer-alt"></i> 0-100 km/h(80 mph): 3.3 s</p>
                <p><i class="fas fa-gas-pump"></i> Fuel Economy Combined: 14.5 l/100km</p>
                <p><i class="fas fa-tachometer-alt"></i> Max speed: 320 km/h (200 mph)</p>
            </div>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const images = document.querySelectorAll('.img-container img');
            const observer = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const imgSrc = entry.target.getAttribute('data-src');
                        if (!localStorage.getItem(imgSrc)) {
                            const img = new Image();
                            img.onload = function () {
                                localStorage.setItem(imgSrc, 'loaded');
                                entry.target.setAttribute('src', imgSrc);
                            };
                            img.src = imgSrc;
                        } else {
                            entry.target.setAttribute('src', imgSrc);
                        }
                        observer.unobserve(entry.target);
                    }
                });
            });

            images.forEach(image => {
                observer.observe(image);
            });
        });
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const carCards = document.querySelectorAll('.car-card');
            carCards.forEach(function (card) {
                const flickity = new Flickity(card.querySelector('.img-container'), {
                    cellAlign: 'left',
                    contain: true,
                    prevNextButtons: true,
                    lazyLoad: true,
                    autoPlay: 2000
                });
            });
        });
    </script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
    <footer class="footer-section">
        <h3>NEWSLETTER</h3>
        <p>Subscribe to our Newsletter!</p>
        <div class="subscribe-form">
            <input type="email" placeholder="Your Email Address">
            <button>Subscribe</button>
        </div>
        <div class="socials-section">
            <a href="https://www.facebook.com/profile.php?id=100005977189177" target="_blank"><i
                    class="fab fa-facebook"></i></a>
            <a href="https://github.com/DenisDanov" target="_blank"><i class="fab fa-github"></i></a>
            <a href="https://www.instagram.com/denisdanov69/" target="_blank"><i class="fab fa-instagram"></i></a>
            <a href="https://www.linkedin.com/in/denis-danov-510756246/" target="_blank"><i
                    class="fab fa-linkedin"></i></a>
        </div>
        <div class="copyright-section">
            <p>&copy; 2023 Danov's Auto Show. All rights reserved.</p>
        </div>
    </footer>
</body>

</html>